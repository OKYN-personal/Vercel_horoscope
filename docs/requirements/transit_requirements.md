# トランジット（経過）機能 要件定義書

## 1. 目的

ユーザーが指定した特定の日時（トランジット日時）における天体の運行状況が、ユーザー自身の出生図（ネイタルチャート）にどのような影響を与えるか（トランジット）を計算・表示する。これにより、ユーザーは特定の時期における運勢の傾向やテーマを知るための一助とする。

## 2. 機能要件

### 2.1 計算機能
-   ユーザーが指定したトランジット日時における主要な天体（太陽～冥王星）の位置（黄経座標）を計算する。
-   トランジット天体と、ユーザーのネイタルチャートの天体および感受点（ASC, MC）との間に形成される主要なアスペクト（合、衝、三分、四分、六分）を計算する。
    -   アスペクト計算時には、適切なオーブ（許容度数差）を設定する。

### 2.2 入力機能
-   ホロスコープ計算入力画面 (`index.html`) に、トランジット日時を指定するための日付入力フィールドを追加する。
    -   デフォルト値は、アクセスした当日とする。
    -   ユーザーが任意の日付を選択できるようにする。

### 2.3 表示機能 (`result.html`)
-   **トランジット天体の位置表示:**
    -   計算結果ページに新しいセクションを追加する。
    -   指定されたトランジット日時における各天体のサイン（星座）と度数をテーブル形式で表示する。
-   **トランジット-ネイタル アスペクト表示:**
    -   計算結果ページに新しいセクションを追加する。
    -   トランジット天体が、ネイタルチャートのどの天体/感受点に対してどのアスペクトを形成しているかをリスト形式で表示する。
    -   表示形式には、トランジット天体名、アスペクト記号、ネイタル天体/感受点名、アスペクトの種類、オーブ（度数差）を含める。

## 3. 非機能要件

-   計算処理速度: トランジット計算を追加しても、ユーザーがストレスを感じない程度の応答速度を維持する。
-   表示の明確性: 追加される情報（トランジット位置、アスペクト）が、既存の情報と区別しやすく、分かりやすいように表示される。
-   エラーハンドリング: 不正な日付入力や計算エラーが発生した場合に、適切なエラーメッセージを表示する。

## 4. スコープ外（今回の実装では含めない）

-   プログレッション（進行）の計算・表示。
-   トランジット天体のハウス位置計算・表示。
-   トランジット天体同士のアスペクト計算・表示。
-   二重円（バイホイール）など、トランジットチャートのグラフィカルな表示。
-   トランジットアスペクトの詳細な解釈文の自動生成。 