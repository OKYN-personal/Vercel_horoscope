# 専門的解析機能 要件定義書

## 1. 概要

「スターゲイザー」アプリケーションの専門的解析機能モジュールは、中級から上級レベルのユーザーや専門占星術師向けに、より高度な占星術技法と分析ツールを提供します。ミッドポイント分析、ハーモニクス、アンティシア、アラビックパーツなど、専門的な占星術手法を実装し、精密で詳細な鑑定を可能にします。

## 2. 目的

- 占星術の専門家やアドバンスユーザーに高度な解析ツールを提供する
- 詳細なチャート分析によって、より深いレベルでの性格理解と予測を実現する
- 複雑な占星術技法を使いやすいインターフェースで提供し、専門分析を効率化する

## 3. 機能要件

### 3.1 ミッドポイント分析機能

| 要件ID | 要件名 | 説明 | 優先度 |
|--------|--------|------|--------|
| MP-01 | ミッドポイント計算 | 全天体間のミッドポイント計算と表示 | 高 |
| MP-02 | ミッドポイントツリー | ツリー構造でのミッドポイント関係表示 | 中 |
| MP-03 | 感受点との関係分析 | ミッドポイントとASC/MC/節点との関係分析 | 高 |
| MP-04 | ミッドポイント解釈 | 主要ミッドポイントの詳細解釈テキスト | 中 |
| MP-05 | カスタム設定 | 分析に使用する天体とオーブのカスタマイズ | 低 |
| MP-06 | トランジットとの関係 | トランジットとミッドポイントの相互作用分析 | 中 |

### 3.2 ハーモニクス解析機能

| 要件ID | 要件名 | 説明 | 優先度 |
|--------|--------|------|--------|
| HM-01 | ハーモニクスチャート | 第5、7、9ハーモニクスなどの計算と表示 | 高 |
| HM-02 | ハーモニクス選択UI | 任意のハーモニック次数を選択できるUI | 中 |
| HM-03 | ハーモニクスアスペクト | ハーモニクスチャートにおけるアスペクト表示 | 高 |
| HM-04 | 複合ハーモニクス | 複数のハーモニクスを組み合わせた分析 | 低 |
| HM-05 | ハーモニクス解釈 | 主要ハーモニクスの意味と解釈テキスト | 中 |
| HM-06 | 調和図比較 | ネイタルチャートとハーモニクスチャートの比較表示 | 中 |

### 3.3 特殊技法分析機能

| 要件ID | 要件名 | 説明 | 優先度 |
|--------|--------|------|--------|
| ST-01 | アンティシア計算 | 対称点（アンティシア）の計算と表示 | 中 |
| ST-02 | Paran関係分析 | 恒星のParan関係の計算と表示 | 低 |
| ST-03 | デカネート分析 | 星座の10度ごとのデカネート詳細分析 | 中 |
| ST-04 | サブラード技法 | サブラードによる詳細ハウス分析 | 低 |
| ST-05 | ローカル・スペース分析 | 地平座標系での天体位置と方向分析 | 低 |
| ST-06 | エソテリック支配星 | エソテリック占星術の階層的支配星システム | 低 |

### 3.4 専門的レポート機能

| 要件ID | 要件名 | 説明 | 優先度 |
|--------|--------|------|--------|
| PR-01 | 詳細PDF生成 | 専門的分析を含む詳細なPDFレポート生成 | 高 |
| PR-02 | カスタムレポート | 分析項目を選択できるカスタムレポート機能 | 中 |
| PR-03 | テクニカルデータ表 | 天体の詳細な位置データと技術情報のテーブル | 高 |
| PR-04 | 図表生成 | 解析結果の視覚的図表の自動生成 | 中 |
| PR-05 | 専門的解説 | 専門家向けの技術的解説文の生成 | 中 |
| PR-06 | 参考文献 | 解釈の出典や参考文献の明示 | 低 |

### 3.5 専門家向けツール

| 要件ID | 要件名 | 説明 | 優先度 |
|--------|--------|------|--------|
| PT-01 | 占星術式エディタ | 占星術計算式をカスタマイズできるエディタ | 低 |
| PT-02 | バッチ処理 | 複数チャートの一括処理機能 | 中 |
| PT-03 | データエクスポート | 分析データのCSV/JSON形式エクスポート | 高 |
| PT-04 | APIアクセス | プログラムによるAPIアクセス機能 | 低 |
| PT-05 | 拡張可能性 | プラグインによる機能拡張システム | 低 |
| PT-06 | 専門用語ガイド | 高度な占星術用語の参照ガイド | 中 |

## 4. 非機能要件

### 4.1 パフォーマンス要件

- 複雑な計算も5秒以内に完了すること
- 大量の天体を含む分析でも安定して動作すること
- レポート生成は10秒以内に完了すること

### 4.2 精度要件

- 天体位置計算は1分角以内の精度を維持すること
- ハーモニクス計算は0.1度以内の精度で行うこと
- アラビックパーツの計算は夜間・昼間出生の違いを考慮すること

### 4.3 ユーザビリティ要件

- 複雑な機能でも直感的に操作できるUI設計
- 専門用語のツールチップと解説
- ユーザーの知識レベルに合わせた表示オプション

### 4.4 拡張性要件

- 将来的な技法追加に対応できる設計
- サードパーティの計算モジュールとの連携可能性
- ユーザー定義の計算式や解釈文の保存

## 5. データ要件

- 拡張天体（小惑星、仮想点等）の天文データ
- 専門的技法の計算アルゴリズム
- 詳細な解釈テキストデータベース

## 6. インターフェース要件

- 専門家向けモードとしてアクセス可能な専用UI
- 高度な設定パネル
- データ可視化のための拡張チャート表示

## 7. 制約事項

- 専門的機能の複雑さをバランスさせたUI設計
- 希少な技法についての参考資料の制限
- 解釈テキストの著作権への配慮

## 8. 想定ユーザー

- プロフェッショナルの占星術師
- 占星術を深く学んでいる中級〜上級者
- 研究目的で占星術を活用する学者・研究者

## 9. 成功基準

- 専門家からの評価スコア4.5/5以上
- 専門ツールセットとしての機能完全性
- 専門的解析機能実装後のプロユーザー増加率15%以上 