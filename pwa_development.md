# モバイルアプリ対応（PWA）開発ドキュメント

## 概要

ホロスコープアプリケーションをモバイルフレンドリーにし、Progressive Web App (PWA) として提供するための機能拡張を行いました。これにより、ユーザーはブラウザだけでなく、スマートフォンやタブレットのホーム画面にインストールして、オフラインでも一部機能を利用できるようになります。

## 主な実装内容

### 1. PWA基本機能
- Webアプリマニフェスト (`manifest.json`) の実装
- Service Worker によるキャッシュと動作制御
- オフライン対応とインストール機能

### 2. レスポンシブデザイン強化
- モバイル向けCSSの拡張
- スマートフォン表示に最適化されたレイアウト
- タッチ操作に対応したインターフェース

### 3. ユーザー体験向上
- インストールバナーによるネイティブアプリ化の提案
- オフラインモード時の視覚的フィードバック
- 高速な読み込みと操作性

## 技術的実装の詳細

### Webアプリマニフェスト
`app/static/manifest.json` ファイルにアプリ情報を定義しました：
```json
{
  "name": "ホロスコープ・サビアンシンボル",
  "short_name": "ホロスコープ",
  "description": "占星術ホロスコープ計算・解釈アプリ",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#ffffff",
  "theme_color": "#336699",
  "icons": [...]
}
```

### Service Worker
`app/static/js/service-worker.js` でリソースのキャッシュとネットワーク管理を行います：
- インストール時に主要リソースをキャッシュ
- ネットワークリクエスト時にキャッシュ優先戦略を適用
- オフライン時にも最低限の機能を提供

### オフライン対応
ネットワーク状態の変化を監視し、オフラインモードに入った場合はユーザーに通知します。また、重要なリソースはキャッシュから提供されます。

### レスポンシブデザイン
CSSメディアクエリを使用して、デバイスの画面サイズに応じたスタイル適用を行います：
```css
@media (max-width: 768px) {
  /* スマートフォン向けスタイル */
}

@media (min-width: 769px) and (max-width: 1024px) {
  /* タブレット向けスタイル */
}
```

## ユーザーガイド

### アプリのインストール方法
1. スマートフォンやタブレットでアプリにアクセスする
2. 表示されるインストールバナーで「インストール」をタップ
3. ホーム画面にアイコンが追加される

### オフラインでの使用
インターネット接続がない場合でも、以下の機能が利用可能です：
- 前回表示したホロスコープデータの閲覧
- 基本的なUI操作とナビゲーション

### 注意事項
- 初回利用時はインターネット接続が必要です
- 新しいホロスコープの計算にはインターネット接続が必要です
- 天体位置計算などの重要な機能はオンラインでのみ利用可能です

## 今後の拡張予定
1. **プッシュ通知**: 重要な天文イベントの通知機能
2. **バックグラウンド同期**: オフライン時の入力を接続時に自動送信
3. **ページ遷移アニメーション**: よりネイティブアプリに近い体験の提供 