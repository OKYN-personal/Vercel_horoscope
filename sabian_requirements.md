# サビアンシンボル機能 要件定義書

## 1. 目的

ユーザーのネイタルチャートおよびトランジットチャートの各天体（または指定された天体）が位置する星座の度数に対応するサビアンシンボルを検索し、その詩文を表示します。これにより、ユーザーは各天体の持つ象徴的な意味をより深く理解し、自己分析や時期読みの一助とすることを目的とします。

## 2. 機能要件

### 2.1 計算・検索機能
-   ネイタルチャートの主要な天体（太陽、月、水星、金星、火星、木星、土星、天王星、海王星、冥王星）および感受点（ASC、MC）の正確な度数（小数点以下を切り上げ）に対応するサビアンシンボルを特定します。
-   トランジットチャートの主要な天体（太陽～冥王星）の正確な度数（小数点以下を切り上げ）に対応するサビアンシンボルを特定します。
-   サビアンシンボルの詩文データ（360個）を内包するか、外部ファイルから読み込みます。

### 2.2 表示機能 (`result.html`)
-   **ネイタル天体のサビアンシンボル表示:**
    -   既存のネイタル天体情報表示箇所（例：天体位置テーブル）に、各天体のサビアンシンボルを表示する欄を追加します。
    -   **UI/UX改善案:**
        -   デフォルトでは感受点（太陽、月、ASC、MCなど）のサビアンシンボルを優先的に目立つように表示し、その他の天体はアコーディオンパネルや「詳細表示」ボタンで展開して見られるようにします。
        -   詩文が長いため、マウスオーバー時にツールチップで全文を表示するか、クリックで専用のモーダルウィンドウに詩文と簡単な解説（もしあれば）を表示します。
-   **トランジット天体のサビアンシンボル表示:**
    -   既存のトランジット天体情報表示箇所（例：トランジット天体位置テーブル）に、各天体のサビアンシンボルを表示する欄を追加します。
    -   表示方法やUI/UX改善案は、ネイタル天体と同様のものを検討します。
-   **UI/UX改善案（共通）:**
    -   サビアンシンボルの表示エリアには、詩文の雰囲気に合わせたアイコンや背景デザインを薄く施し、視覚的な魅力を高めます。
    -   ユーザーが特に注目したい天体のサビアンシンボルを「ピン留め」または「ハイライト」できる機能を追加し、他の情報に埋もれないようにします。

## 3. 非機能要件

-   **データ管理:** サビアンシンボルデータ（360個の詩文）の保守性・可読性を考慮した形式で管理します（例: JSONファイル）。
-   **表示の明確性:** どの天体のサビアンシンボルであるかが直感的に理解できるよう、関連付けを明確に表示します。
-   **パフォーマンス:** サビアンシンボル表示による追加の処理負荷が、全体の表示速度に影響を与えないようにします。
-   **可読性:** 詩文が読みやすいフォントサイズ、行間、配色を選択します。

## 4. スコープ外（今回の実装では含めない）

-   サビアンシンボルの詳細な解釈文の自動生成やAIによる解説。
-   サビアンシンボル同士の関連性（例：反対側の度数など）の表示。
-   ユーザーによるサビアンシンボルデータの編集・追加機能。
-   サビアンシンボル占星術に基づいた専門的な分析機能。 