# ホロスコープアプリ - PWA機能

このドキュメントでは、ホロスコープ計算アプリのPWA（Progressive Web App）機能について説明します。

## PWA機能の概要

このアプリケーションには以下のPWA機能が実装されています：

1. **インストール可能なアプリ体験**
   - ブラウザのアドレスバーがない、アプリのような全画面表示
   - ホーム画面にアイコンを追加可能
   - 起動画面とブランディング

2. **オフライン対応**
   - 主要UIコンポーネントのオフラインキャッシュ
   - インターネット接続状態の自動検出
   - 過去の計算結果のローカルキャッシュ

3. **モバイル最適化**
   - レスポンシブデザイン
   - 位置情報の統合（現在地取得機能）

## PWA実装の技術詳細

以下の技術を使用してPWA機能を実装しています：

- **Web App Manifest**: アプリのメタデータを定義
- **Service Worker**: オフラインキャッシュとバックグラウンド同期
- **IndexedDB/LocalStorage**: クライアントサイドストレージ
- **Geolocation API**: 位置情報取得
- **オンライン/オフライン検出**: ネットワーク状態の監視

## ブラウザ対応状況

以下のブラウザでPWA機能が利用可能です：

- Google Chrome（デスクトップ/モバイル）: 全機能対応
- Microsoft Edge: 全機能対応
- Firefox: 部分対応（インストール機能はモバイルのみ）
- Safari: iOS/iPadOS 11.3以降で部分対応

## PWAの使い方

### インストール方法

1. **Chrome/Edge（デスクトップ）**:
   - アドレスバーの右側にあるインストールアイコンをクリック
   - または「アプリをインストール」ボタンをクリック

2. **Chrome/Edge（モバイル）**:
   - ブラウザのメニューから「ホーム画面に追加」を選択
   - または「アプリをインストール」ボタンをクリック

### オフラインでの使用方法

1. アプリを一度オンラインで開き、必要なリソースをキャッシュする
2. オフラインになると自動的にオフラインモードに切り替わる
3. 過去に計算したホロスコープ結果はオフラインでも閲覧可能

### 位置情報の使用

1. 「現在地を使用」ボタンをクリック
2. ブラウザの位置情報許可を承認
3. 現在地の緯度・経度が自動入力される

## 開発者向け情報

### PWA関連ファイル

- `static/manifest.json`: Webアプリマニフェスト
- `static/js/service-worker.js`: サービスワーカーの実装
- `static/js/register-sw.js`: サービスワーカー登録スクリプト

### アイコン生成

PWA用アイコンが必要な場合は、以下のスクリプトを実行してサンプルアイコンを生成できます：

```bash
cd horoscope-frontend
pip install pillow
python generate_icons.py
```

これにより、`static/icons/`ディレクトリに必要なサイズのアイコンが生成されます。 